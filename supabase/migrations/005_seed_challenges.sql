-- StoryRelay 챌린지 시드 데이터
-- sample-data.ts / mockup 구조 기반
-- Supabase SQL Editor 또는 migration으로 실행

-- ============================================
-- 1. challenges (7개)
-- ============================================
INSERT INTO public.challenges (id, title, description, theme, start_at, end_at, status, participants) VALUES
  -- active
  ('c1000001-0000-4000-8000-000000000001', '2026 새해 첫 이야기 챌린지', '새해의 희망과 다짐을 담은 이야기를 함께 써보세요.', '봄, 만남, 시작', '2026-01-01 00:00:00+09', '2026-02-06 23:59:59+09', 'active', 156),
  ('c1000002-0000-4000-8000-000000000002', '반전의 마법사 챌린지', '예상치 못한 반전이 있는 판타지 이야기를 만들어보세요.', '판타지, 반전', '2026-02-10 00:00:00+09', '2026-02-28 23:59:59+09', 'active', 89),
  ('c1000005-0000-4000-8000-000000000005', '에필로그 작성 챌린지', '완성된 이야기에 나만의 에필로그를 써보세요! 다른 독자들이 쓴 결말과는 다른, 당신만의 마무리를 선보여주세요.', '에필로그, 창작', '2026-02-15 00:00:00+09', '2026-03-15 23:59:59+09', 'active', 67),
  -- upcoming
  ('c1000003-0000-4000-8000-000000000003', '미래 도시 탐험 챌린지', '2100년의 도시를 배경으로 한 SF 이야기를 함께 써보세요.', 'SF, 미래, 기술', '2026-03-01 00:00:00+09', '2026-03-31 23:59:59+09', 'upcoming', 0),
  ('c1000006-0000-4000-8000-000000000006', '첫 문장 챌린지', '한 문장으로 독자를 사로잡아보세요. 가장 매력적인 첫 문장을 쓰는 사람이 이기는 챌린지입니다.', '첫 문장, 훅', '2026-03-01 00:00:00+09', '2026-03-31 23:59:59+09', 'upcoming', 0),
  -- ended (수상작 있음)
  ('c1000004-0000-4000-8000-000000000004', '겨울밤 로맨스 챌린지', '추운 겨울밤, 따뜻한 사랑 이야기를 만들어보세요.', '로맨스, 겨울', '2025-12-01 00:00:00+09', '2025-12-31 23:59:59+09', 'ended', 234),
  ('c1000007-0000-4000-8000-000000000007', '반전 한 줄 챌린지', '마지막 턴에 한 줄의 반전을 넣어보세요. 독자들을 깜짝 놀라게 할 수 있을까요?', '반전, 서스펜스', '2025-11-01 00:00:00+09', '2025-11-30 23:59:59+09', 'ended', 189)
ON CONFLICT (id) DO NOTHING;

-- ============================================
-- 2. 수상작용 story_rooms (created_by = NULL, 데모용)
-- ============================================
INSERT INTO public.story_rooms (id, title, genre, preview, like_count, challenge_id, is_completed, completed_at, total_authors) VALUES
  ('a2000001-0000-4000-8000-000000000001', '별빛 속의 약속', '로맨스', '그날 밤 하늘의 별들은 유난히 빛났고, 우리의 약속도 그만큼 빛났다...', 892, 'c1000004-0000-4000-8000-000000000004', true, '2025-12-28 12:00:00+09', 5),
  ('a2000002-0000-4000-8000-000000000002', '시간의 문을 열다', '판타지', '마법사는 자신이 지켜온 것이 사실은 저주였음을 깨달았다...', 734, 'c1000002-0000-4000-8000-000000000002', true, '2026-02-25 14:00:00+09', 4),
  ('a2000003-0000-4000-8000-000000000003', '기억의 파편들', '로맨스', '잃어버린 기억들이 하나씩 돌아올 때마다 그녀는 진실에 가까워졌다...', 621, 'c1000004-0000-4000-8000-000000000004', true, '2025-12-30 18:00:00+09', 6)
ON CONFLICT (id) DO NOTHING;

-- ============================================
-- 3. challenge_winners (수상작 등록)
-- ============================================
INSERT INTO public.challenge_winners (challenge_id, room_id, rank) VALUES
  ('c1000004-0000-4000-8000-000000000004', 'a2000001-0000-4000-8000-000000000001', 1),  -- 겨울밤 로맨스 1위
  ('c1000002-0000-4000-8000-000000000002', 'a2000002-0000-4000-8000-000000000002', 2),  -- 반전의 마법사 2위
  ('c1000004-0000-4000-8000-000000000004', 'a2000003-0000-4000-8000-000000000003', 3)   -- 겨울밤 로맨스 3위
ON CONFLICT (challenge_id, rank) DO NOTHING;

-- ============================================
-- 4. challenge_stories (참여 스토리 연결 - 수상작)
-- ============================================
INSERT INTO public.challenge_stories (challenge_id, room_id) VALUES
  ('c1000004-0000-4000-8000-000000000004', 'a2000001-0000-4000-8000-000000000001'),
  ('c1000002-0000-4000-8000-000000000002', 'a2000002-0000-4000-8000-000000000002'),
  ('c1000004-0000-4000-8000-000000000004', 'a2000003-0000-4000-8000-000000000003')
ON CONFLICT (challenge_id, room_id) DO NOTHING;
